!function(){"use strict";let e;window.VWO=window.VWO||[],window.VWO.v="7.0",window.VWO.v_e="7c5b6487c";const t=function(){if(void 0!==e)return e;const t=[],n=window.VWO._.allSettings.dataStore.campaigns;let o,i;for(let e in n)t.push(e);return e=!!(o=(window.location.search+window.location.hash).match(/.*_vis_test_id=(.*?)&.*_vis_opt_preview_combination=(.*)$/))&&(!(!t.includes(o[1])||!n[o[1]]||void 0===n[o[1]].combs[i=function(e){if(!e)return e;try{e=window.decodeURIComponent(e)}catch(e){}return e}(o[2])])&&i),e};class n{constructor(){var e;window.VWO._.phoenixMT.on("vwo_campaignsLoaded",(()=>this.processLoadedCampaigns())),(null===(e=window.VWO._.phoenixMT.getEventHistory("vwo_campaignsLoaded"))||void 0===e?void 0:e.length)>0&&(this.processLoadedCampaigns(),window.VWO._.phoenixMT.clearEventHistory("vwo_campaignsLoaded"))}processLoadedCampaigns(){this.setBucketedCampaigns(),this.executeAll({bucketed_campaigns:window.VWO._.bucketedCampaignsAPIStore.campaigns})}setBucketedCampaigns(){window.VWO._.bucketedCampaignsAPIStore=window.VWO._.bucketedCampaignsAPIStore||{},window.VWO._.bucketedCampaignsAPIStore.campaigns=[];let e=window._vis_debug||t()?"debug":"";e+="_vis_opt_exp_";const n=new RegExp(`^${e}(\\d{1,})_combi$`,""),o=document.cookie.split(";");for(let e=0;e<o.length;e++){const[t,i=""]=o[e].split("=").map((e=>e.trim())),a=n.exec(t);a&&_vwo_exp[a[1]]&&window.VWO._.bucketedCampaignsAPIStore.campaigns.push({[a[1]]:i,name:_vwo_exp[a[1]].name,variation:_vwo_exp[a[1]].comb_n[i]})}}executeAll(e={}){var t,n;for(let o=0;o<((null===(n=null===(t=window.VWO._.bucketedCampaignsAPIStore)||void 0===t?void 0:t.callbacks)||void 0===n?void 0:n.length)||0);o++)window.VWO._.bucketedCampaignsAPIStore.callbacks[o](e)}}
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */function o(e,t,n,o){return new(n||(n=Promise))((function(i,a){function s(e){try{d(o.next(e))}catch(e){a(e)}}function r(e){try{d(o.throw(e))}catch(e){a(e)}}function d(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}d((o=o.apply(e,t||[])).next())}))}const i="vwo_pageUnload";function a(e){return e?Math.round(100*e)/100:0}var s,r,d,l,c,g,w;!function(e){e.DOM="vwo_dom"}(s||(s={})),function(e){e.WILD_CARD="*",e.TRIGGER="trigger",e.POST_INIT="post-init",e.TIMER="vwo_timer"}(r||(r={})),function(e){e.URL_CHANGE="vwo_urlChange",e.LEAVE_INTENT="vwo_leaveIntent",e.CLICK_EVENT="vwo_dom_click",e.SUBMIT_EVENT="vwo_dom_submit",e.PAGE_LOAD_EVENT="vwo_page_load"}(d||(d={})),function(e){e.PAGE_VIEW="vwo_pageView",e.PAGE_UNLOAD_EVENT="vwo_pageUnload"}(l||(l={})),function(e){e.EXIT_CONDITIONS="__exitConditions"}(c||(c={})),function(e){e.DOM_CONTENT_LOADED="DOMContentLoaded",e.SCROLL="scroll",e.CLICK="click",e.SUBMIT="submit"}(g||(g={})),function(e){e[e.DEBUG=0]="DEBUG",e[e.INFO=1]="INFO",e[e.WARN=2]="WARN",e[e.ERROR=3]="ERROR"}(w||(w={}));var u=new class{constructor(e){this.setLevel(e)}setLevel(e="warn"){this.logLevel=w[e.toUpperCase()]}info(e,t={}){this.customLog(w.INFO,e,t)}debug(e,t={}){this.customLog(w.DEBUG,e,t)}warn(e,t={}){var n,o;this.customLog(w.WARN,e,t,null===(o=null===(n=window.VWO)||void 0===n?void 0:n._)||void 0===o?void 0:o.customError)}error(e,t={}){var n,o;this.customLog(w.ERROR,e,t,null===(o=null===(n=window.VWO)||void 0===n?void 0:n._)||void 0===o?void 0:o.customError)}customLog(e,t,n,o=null){var i,a,s;if(e>=this.logLevel){const r=this.formatMessage(e,t,n);null===(s=null===(a=null===(i=window.VWOEvents)||void 0===i?void 0:i.store)||void 0===a?void 0:a.actions)||void 0===s||s.addLogsForDebugging(r),o?o(r):this.consoleLog(e,[r])}}consoleLog(e,t){switch(e){case w.INFO:console.info(...t);break;case w.WARN:console.warn(...t);break;case w.ERROR:console.error(...t);break;default:console.log(...t)}}formatMessage(e,t,n){var o,i;const a=Object.keys(n).reduce(((e,t)=>e.replace(new RegExp(`{{${t}}}`,"g"),n[t])),t),r=`${s.DOM}_`;let d=n;const l=(null===(o=n.data)||void 0===o?void 0:o.vwoEventName)||n.vwoEventName;return l!==r+g.CLICK&&l!==r+g.SUBMIT||(d=n.data?null===(i=n.data)||void 0===i?void 0:i.props:d.props,d=d||{name:l}),`VWO: [${w[e].toUpperCase()}] [${(new Date).toUTCString()}] ${a} ${JSON.stringify(d)}`}}("warn");class v{constructor(){this.GoalsEnum=window.VWO._.GoalsEnum,this.eventName=i,this.attachedFilters=[],this.unloadListenersAttached=!1,this.registeredTriggers=[],this.unloadCaptured=!1,this.pageStartTime=performance?performance.timeOrigin:Date.now(),this.goalConverter=new window.VWO.modules.utils.goalUtils.GoalConversion("vwoPageUnloadData",[this.GoalsEnum.PAGE_UNLOAD,this.GoalsEnum.CUSTOM_GOAL]),window.VWO._.phoenixMT.on("vwo_campaignsLoaded",(()=>{this.updatePageUnloadTriggers()})),this.updatePageUnloadTriggers()}updatePageUnloadTriggers(){return o(this,void 0,void 0,(function*(){const e=yield window.fetcher.getValue("VWO._.pageUnloadTriggers");if(this.pageData=yield window.fetcher.getValue("VWO.pluginStorage.props.page"),!e)return;const t=Object.keys(e);if(this.registeredTriggers.length!==t.length){const e=this.extractPageUnloadFilters(t);this.attachedFilters=function(e){const t=[];return e.forEach((e=>{var n;null===(n=e.filters)||void 0===n||n.forEach(((n,o)=>{const i=n[0].substring(0,n[0].indexOf("."));if("event"===i||"page"===i){const i=JSON.parse(JSON.stringify(n));t.push({condition:i,triggerName:e.triggerName,condId:e.id,filterId:o})}}))})),t}(e),this.registeredTriggers=t,this.addListenersForPageUnload()}}))}extractPageUnloadFilters(e){var t;const n=[];for(let o=0;o<e.length;o++){const i=null===(t=window.VWO._.allSettings.triggers[e[o]])||void 0===t?void 0:t.cnds;for(let t=0;t<i.length;t++){if(0===Object.keys(i[t].filters).length)i[t].filters=[];else for(let e=0;e<i[t].filters.length;e++){const n=i[t].filters[e],o=n[0].match(/^page\.(.*)/);o&&(n[0]="event."+o[1])}n.push(Object.assign(Object.assign({},i[t]),{triggerName:e[o]}))}}return n}evaluateAndSendData(e){var t;let n;(e=Object.assign({},e,this.pageData)).timeSpent=Math.floor((Date.now()-this.pageStartTime)/1e3),e.scrollPercent=function(){const e=document.documentElement,t=document.body,n=window.scrollY||window.pageYOffset,o=window.scrollX||window.pageXOffset,i=e.scrollHeight||t.scrollHeight,s=e.scrollWidth||t.scrollWidth,r=n/(i-window.innerHeight)*100;return{x:a(o/(s-window.innerWidth)*100),y:a(r)}}(),window.VWO._.lastPageUnloadURL=this.pageData.url;try{e.preComputedConds=window.VWO.modules.utils.triggers.triggersConditionsCheck(this.eventName,e,this.attachedFilters),n={vwoEventName:this.eventName,preComputedConds:e.preComputedConds,page:this.pageData,timeSpent:e.timeSpent,scrollPercent:e.scrollPercent},this.goalConverter.fireEventForConversion(this.eventName,n);const o=(null===(t=n._vwo)||void 0===t?void 0:t.eventDataConfig)||{};Object.keys(o).length&&window.VWO.modules.events.syncEventsDataToDataLayer(this.eventName,n)}catch(e){u.error(e)}delete window.VWO._.lastPageUnloadURL}resetStartTimeAndPageData(){this.pageStartTime=Date.now(),this.updatePageUnloadTriggers()}sendDataWrapper(e){return this.unloadCaptured?this.unloadCaptured=!1:(this.evaluateAndSendData(e),this.unloadCaptured=!0)}addListenersForPageUnload(){this.unloadListenersAttached||(window.addEventListener("beforeunload",(e=>{this.sendDataWrapper(e)})),window.addEventListener("pagehide",(e=>{this.sendDataWrapper(e)})),window.VWO._.phoenixMT.on("vwo_urlChangeMt",(e=>{this.evaluateAndSendData(e),this.resetStartTimeAndPageData()})),this.unloadListenersAttached=!0)}}window.VWO._.ncLib=window.VWO._.ncLib||{};var h=!1;window.VWO._.ncLib.initNonCriticalLib=()=>{h||(new n,window.VWO.modules.phoenixPlugins.events.predefinedEvents.PageUnloadEvent=new v,h=!0)},window.VWO._.phoenixMT&&window.VWO._.phoenixMT.trigger("vwo_InitNCLib")}();

