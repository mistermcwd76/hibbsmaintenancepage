function isInViewport(element){var bounds=element.getBoundingClientRect(),viewportTop=window.pageYOffset,viewportBottom=(window.innerHeight||document.documentElement.clientHeight)+window.pageYOffset,viewportLeft=window.pageXOffset,viewportRight=(window.innerWidth||document.documentElement.clientWidth)+window.pageXOffset;return bounds.top!==bounds.bottom&&bounds.left!==bounds.right&&(bounds.top>=viewportTop&&bounds.top<viewportBottom||bounds.bottom>viewportTop&&bounds.bottom<=viewportBottom)&&(bounds.left>=viewportLeft&&bounds.left<viewportRight||bounds.right>viewportLeft&&bounds.right<=viewportRight)}function webpSupport(){if("webpsupport"in sessionStorage){return sessionStorage.webpsupport=="true"}else{var image=new Image;image.onload=function(event){var result=event&&event.type==="load"?image.width==1:false;sessionStorage.webpsupport=result;return result};image.onerror=function(){sessionStorage.webpsupport=false;return false};image.src="data:image/webp;base64,UklGRiQAAABXRUJQVlA4IBgAAAAwAQCdASoBAAEAAwA0JaQAA3AA/vuUAAA="}}var images=document.querySelectorAll("#main img[data-src]:not([src]):not(.alt-image-thumb)"),webp=webpSupport(),mobile=window.innerWidth<768,imageLoaded=false;for(var i=0;i<images.length;i++){var image=images[i];if(isInViewport(image)){image.src=image.dataset.src+(webp?(image.dataset.src.indexOf("?")==-1?"?":"&")+"fmt=webp":"");if(image.parentElement.nodeName==="PICTURE"){image.parentNode.querySelectorAll("source").forEach(function(source){if(source.hasAttribute("data-srcset")){source.srcset=source.dataset.srcset+(webp?(source.dataset.srcset.indexOf("?")==-1?"?":"&")+"fmt=webp":"")}})}if(!mobile&&image.className.indexOf("main-image-thumb")>-1){var altImage=image.nextElementSibling;if(altImage instanceof HTMLElement&&altImage.className.indexOf("alt-image-thumb")>-1){altImage.src=altImage.dataset.src+(webp?(altImage.dataset.src.indexOf("?")==-1?"?":"&")+"fmt=webp":"");altImage.classList.add("loaded")}}image.classList.remove("unloaded");image.dataset.observed=true;imageLoaded=true}else if(imageLoaded){break}}